# Polymarket Trade Scanner — Algorithm Overview

Этот документ описывает **алгоритм сканера сделок Polymarket**, изображённый на схеме, не на уровне кода, а на уровне **смысла, эвристик и философии принятия решений**.

Цель алгоритма — **отфильтровать шум** и выделить **осмысленные, рискованные ставки**, которые могут отражать убеждения или информационное преимущество.

---

## 0. Общая идея

Polymarket — это среда с:

* огромным количеством мелких ставок
* активностью LP (liquidity providers)
* арбитражом
* реактивными сделками на новости

Алгоритм **не пытается торговать** и **не пытается предсказывать исход**.

Он отвечает на вопрос:

> *«Является ли эта сделка просто шумом или выражением осмысленного мнения с реальным риском?»*

Структурно это:

**Фильтрация шума → Выделение намерения → Обогащение контекста**

---

## 1. Trade Received (WebSocket)

Источник данных — Polymarket CLOB WebSocket.

Каждая сделка содержит:

* `wallet / address`
* `market_id`
* `side` (YES / NO)
* `size` (USD)
* `price / odds`
* `timestamp`

Важно:

* **одна сделка ничего не значит**
* ценность появляется только в контексте рынка и поведения

---

## 2. Market Filter — фильтр рынков

### Зачем нужен

Не все рынки одинаково информативны.

Плохие кандидаты для анализа:

* спортивные рынки (арбитраж, боты)
* крипторынки (HFT, маркет-мейкеры)
* рынки с очень коротким временем до экспирации
* рынки с экстремально высокой ликвидностью

### Логика

Сделка **отбрасывается**, если рынок:

* относится к запрещённой категории
* слишком реактивный
* доминируется арбитражем

Цель — оставить рынки, где есть место **убеждению**, а не реакции.

---

## 3. Size Filter — фильтр размера

```
trade_size < $2,000 → discard
```

### Зачем

Маленькие ставки:

* почти не несут информации
* часто используются для арбитража
* могут быть тестовыми или LP-действиями

Большая ставка = **реальный риск**.

> Где боль — там информация.

---

## 4. LP Detection — детекция маркет-мейкеров

### Ключевая идея

LP ≠ мнение.

LP:

* зарабатывает на спреде
* балансирует риск
* не выражает directional belief

### Типичные признаки LP

* частые сделки в обе стороны (YES и NO)
* симметричные или почти одинаковые объёмы
* повторяющиеся размеры
* высокая частота
* сделки, догоняющие движение цены

Алгоритм:

* эвристический
* вероятностный
* "похоже на LP" → discard

---

## 5. Signal Detection — детекция смыслов

На этом этапе сделки **не отбрасываются**, а **аннотируются сигналами**.

Одна сделка может иметь несколько сигналов.

---

### 5.1 Fresh Wallet

**Описание:**

Новый или почти неактивный кошелёк делает крупную ставку.

**Почему важно:**

* нет истории
* нет арбитражных паттернов
* высокий риск

Часто связано с:

* инсайдом
* сильным убеждением

---

### 5.2 Size Anomaly

Сравнение размера сделки:

* со средним размером по рынку
* со средним размером кошелька

Если сделка значительно выбивается — это аномалия.

---

### 5.3 Timing Signal

Когда сделана ставка:

* рано, до движения рынка
* незадолго до события
* сразу после новости, но **до** реакции рынка

Это может указывать на информационное преимущество.

---

### 5.4 Odds Movement Correlation

Связь:

```
Trade → Movement of odds
```

Если рынок двигается **из-за** сделки:

* ликвидность была поглощена
* ставка не была пассивной

---

### 5.5 Contrarian

Крупная ставка **против текущего рыночного консенсуса**.

Толпа редко бывает права до наступления события.

---

### 5.6 Cluster

Несколько кошельков:

* действуют в одном направлении
* за короткий промежуток времени
* на одном рынке

Это уже не одиночное мнение, а паттерн.

---

## 6. Alert Enrichment — обогащение контекста

На этом этапе:

«Странная сделка» → «Осмысленный сигнал»

Добавляется:

* профиль кошелька
* исторический win-rate (даже грубый)
* текущие odds
* ликвидность рынка
* derived confidence score

---

## 7. Output — финальный алерт

В результате выводятся **не все сделки**, а только те, которые:

* прошли фильтры
* несут риск
* имеют сигналы
* обогащены контекстом

Пример смыслового вывода:

* рынок
* направление ставки
* размер
* сигналы
* изменение odds
* уверенность

---

## Финальное резюме

Этот алгоритм:

* ❌ не про автоматическую торговлю
* ❌ не про HFT
* ❌ не про предсказание исходов

Он про:

> **детекцию убеждений в условиях рыночного шума**

Именно поэтому он хорошо подходит как база для:

* алертинга
* ресёрча
* полуавтоматических стратегий
* дальнейшего ML-скоринга

---

## Возможные направления развития

* формализация эвристик в скоринг
* storage истории кошельков
* sliding windows по времени
* ML поверх сигналов
* Telegram / Web UI
